{% extends 'base.html' %}

{% block content %}

<style>
    .input-setting {
        background-color: #1a1a1a;
        border: 1px solid #444;
        color: white;
        padding: 8px;
        text-align: center;
    }
</style>

<div class="container mt-4">
    <div class="card shadow border-0" style="background-color: #252525;">
        <div class="card-header bg-dark border-secondary p-3">
            <h4 class="text-white fw-bold mb-0">⚙️ إعدادات التقديرات</h4>
        </div>
        <div class="card-body p-3">
            <form method="POST">
                {{ csrf_field() }}
                <div class="table-responsive">
                    <table class="table table-dark table-hover align-middle">
                        <thead>
                            <tr>
                                <th>Min</th>
                                <th>Max</th>
                                <th>Message</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="rulesTable">
                            {% for rule in rules %}
                            <tr>
                                <td><input type="number" step="0.01" name="min_val" value="{{ rule.min_val }}" class="form-control input-setting"></td>
                                <td><input type="number" step="0.01" name="max_val" value="{{ rule.max_val }}" class="form-control input-setting"></td>
                                <td><input type="text" name="message" value="{{ rule.message }}" class="form-control input-setting"></td>
                                <td><button type="button" class="btn btn-outline-danger btn-sm" onclick="this.closest('tr').remove()">×</button></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="mt-3">
                    <button type="button" class="btn btn-secondary" onclick="addRule()">+ Ajouter</button>
                    <button type="submit" class="btn btn-success">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    function addRule() {
        var table = document.getElementById('rulesTable');
        var row = table.insertRow();
        row.innerHTML = `<td><input type="number" step="0.01" name="min_val" class="form-control input-setting"></td><td><input type="number" step="0.01" name="max_val" class="form-control input-setting"></td><td><input type="text" name="message" class="form-control input-setting"></td><td><button type="button" class="btn btn-outline-danger btn-sm" onclick="this.closest('tr').remove()">×</button></td>`;
    }
</script>

{% endblock %}